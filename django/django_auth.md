### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ Django
* –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ –º–æ–¥–µ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ¬´–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é¬ª
```
–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ –º–æ–¥–µ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ¬´–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é¬ª
–ü—Ä–∏ –æ–±—à–∏—Ä–Ω–æ–º –Ω–∞–±–æ—Ä–µ –ø–æ–ª–µ–π –≤ —ç—Ç–æ–π –º–æ–¥–µ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤—ã–¥–µ–ª—è–µ—Ç—Å—è —Ä—è–¥ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–≤:
1. –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å—á–∏—Ç–∞–µ—Ç—Å—è —Ä–µ–≥–∏—Å—Ç—Ä–æ–∑–∞–≤–∏—Å–∏–º—ã–º. –¢–æ –µ—Å—Ç—å, —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è Django, –∏–º–µ–Ω–∞, —Ç–∏–ø–∞
John –∏ john, —Ä–∞–∑–Ω—ã–µ.
2. –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–∞—Å—Ç–æ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ unicode-—Å–∏–º–≤–æ–ª–æ–≤. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ –Ω–µ–≥–æ –≤—Ö–æ–¥—è—Ç —Ç–∞–∫–∏–µ
—Å–∏–º–≤–æ–ª—ã, –∫–∞–∫ @, +, _ –∏ –¥–∞–∂–µ
üòé.
3. –ê–¥—Ä–µ—Å —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã –Ω–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å
–æ–¥–Ω–∏–º –º–µ–π–ª–æ–º —Å–º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ –∞–∫–∫–∞—É–Ω—Ç–æ–≤. –ò –µ—Å–ª–∏ –≤ –æ–¥–Ω–æ–π —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ –µ—Å—Ç—å
—á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, —Ç–æ –ø–æ—Ç–æ–º –±—É–¥–µ—Ç —Å–ª–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å —á–µ—Ä–µ–∑ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—É—é
–ø–æ—á—Ç—É.
4. –ü–æ–ª–µ –∞–¥—Ä–µ—Å–∞ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã –∑–∞–ø–æ–ª–Ω—è—Ç—å –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ. –û–¥–Ω–∞–∫–æ –±–µ–∑ —ç—Ç–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
—Å–ª–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫—Ç–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª—Å—è –Ω–∞ —Å–∞–π—Ç–µ: –±–æ—Ç –∏–ª–∏ —á–µ–ª–æ–≤–µ–∫.
5. –ò–Ω–æ–≥–¥–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –º–µ—Ç–æ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–∞—Ä–æ–ª—è –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä None.
–ò–∑-–∑–∞ —ç—Ç–æ–≥–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–º–µ–Ω—ã –ø–∞—Ä–æ–ª—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
6. –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –º–æ–¥–µ–ª–∏ ¬´–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é¬ª —Ç—Ä—É–¥–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ –Ω–æ–≤—É—é –º–æ–¥–µ–ª—å
–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ–≥–¥–∞ –ø—Ä–æ–≤–æ–¥—è—Ç—Å—è –ø–µ—Ä–≤—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏.
–í–∞–∂–Ω–æ! –ù–µ–ª—å–∑—è –∑–∞–¥–∞—Ç—å –∞–≤–∞—Ç–∞—Ä –∏–ª–∏ –≤–æ–∑—Ä–∞—Å—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
–î–ª—è —Ä–µ—à–µ–Ω–∏—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —ç—Ç–∏—Ö –ø—Ä–æ–±–ª–µ–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ Django —Ä–µ–∫–æ–º–µ–Ω–¥—É—é—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é
—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –º–æ–¥–µ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
```
* —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```
python manage.py startapp authapp
```
* config/settings.py
```python
INSTALLED_APPS = [
    "django.contrib.admin",
    "django.contrib.auth",
    "django.contrib.contenttypes",
    "django.contrib.sessions",
    "django.contrib.messages",
    "django.contrib.staticfiles",
    "mainapp",
    "authapp", #new
]
```
* –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –º–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```python
from pathlib import Path
from time import time

from django.contrib.auth.base_user import AbstractBaseUser
from django.contrib.auth.models import PermissionsMixin, UserManager
from django.contrib.auth.validators import ASCIIUsernameValidator
from django.core.mail import send_mail
from django.db import models
from django.utils.translation import gettext_lazy as _

# —Ñ—É–Ω–∫—Ü–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è –∏–º–µ–Ω–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –≤ unicode:
# instance ‚Äî —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞ –º–æ–¥–µ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
# filename ‚Äî –∏–º—è –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
def users_avatars_path(instance, filename):
    # file will be uploaded to
    #   MEDIA_ROOT / user_<username> / avatars / <filename>
    num = int(time() * 1000)
    suff = Path(filename).suffix
    return "user_{0}/avatars/{1}".format(instance.username, f"pic_{num}{suff}")


class CustomUser(AbstractBaseUser, PermissionsMixin):
    username_validator = ASCIIUsernameValidator()

    username = models.CharField(
        _("username"),
        max_length=150,
        unique=True,
        help_text=_("Required. 150 characters or fewer. Letters, digits and @/./+/-/_ only."),
        validators=[username_validator],
        error_messages={
            "unique": _("A user with that username already exists."),
        },
    )
    first_name = models.CharField(_("first name"), max_length=150, blank=True)
    last_name = models.CharField(_("last name"), max_length=150, blank=True)
    age = models.PositiveIntegerField(blank=True, null=True)
    # –ø–æ–ª–µ –¥–ª—è –∞–≤–∞—Ç–∞—Ä–∫–∏
    avatar = models.ImageField(upload_to=users_avatars_path, blank=True, null=True)
    email = models.CharField(
        _("email address"),
        max_length=256,
        unique=True,
        error_messages={
            "unique": _("A user with that email address already exists."),
        },
    )
    is_staff = models.BooleanField(
        _("staff status"),
        default=False,
        help_text=_("Designates whether the user can log into this admin site."),
    )
    is_active = models.BooleanField(
        _("active"),
        default=True,
        help_text=_(
            "Designates whether this user should be treated as active. \
            Unselect this instead of deleting accounts."
        ),
    )
    date_joined = models.DateTimeField(_("date joined"), auto_now_add=True)

    objects = UserManager()

    EMAIL_FIELD = "email"
    USERNAME_FIELD = "username"
    REQUIRED_FIELDS = ["email"]

    class Meta:
        verbose_name = _("user")
        verbose_name_plural = _("users")

    # –º–µ—Ç–æ–¥ –¥–ª—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ e-mail
    def clean(self):
        super().clean()
        self.email = self.__class__.objects.normalize_email(self.email)

    # –ø–æ–ª–Ω–æ–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–º—è, —Ñ–∞–º–∏–ª–∏—è —á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª
    def get_full_name(self):
        """
        Return the first_name plus the last_name, with a space in between.
        """
        full_name = "%s %s" % (self.first_name, self.last_name)
        return full_name.strip()

    # —Ç–æ–ª—å–∫–æ –∏–º—è
    def get_short_name(self):
        """Return the short name for the user."""
        return self.first_name

    # –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø–∏—Å—å–º–æ –ø–æ e-mail
    def email_user(self, subject, message, from_email=None, **kwargs):
        """Send an email to this user."""
        send_mail(subject, message, from_email, [self.email], **kwargs)
```
* —á—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å
```
1. –í–∞–ª–∏–¥–∞—Ç–æ—Ä –¥–ª—è –ø–æ–ª—è username. –í–∞–ª–∏–¥–∞—Ç–æ—Ä—ã ‚Äî —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
–ø–æ–ª—è –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –∑–∞–ø–∏—Å–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ –ë–î. –¢–µ–ø–µ—Ä—å –ø–æ–ª–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ ASCII-—Å–∏–º–≤–æ–ª—ã.
2. –î–æ–±–∞–≤–∏–ª–æ—Å—å –ø–æ–ª–µ –≤–æ–∑—Ä–∞—Å—Ç–∞ ‚Äî age.
3. –ü–æ–ª–µ email —Ç–µ–ø–µ—Ä—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –∏ —É–Ω–∏–∫–∞–ª—å–Ω–æ.
4. –¢–µ–ø–µ—Ä—å –µ—Å—Ç—å –ø–æ–ª–µ avatar –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
```
* —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Pillow –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ (–∞–≤–∞—Ç–∞—Ä–∫–∏)
```
pip install Pillow
```
* –≤ config/settings.py –ø—Ä–æ–ø–∏—Å—ã–≤–∞–µ–º –ø—É—Ç—å –¥–æ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤
```python
MEDIA_URL = "/media/"
MEDIA_ROOT = BASE_DIR / "media"
```
* –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–µ–¥–∏–∞—Ñ–∞–π–ª–∞–º–∏ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ—Ç–ª–∞–¥–∫–∏ –Ω–∞–¥–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —É–∫–∞–∑–∞—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ
–∞–¥—Ä–µ—Å–∞ –≤ –∫–æ—Ä–Ω–µ–≤–æ–º –¥–∏—Å–ø–µ—Ç—á–µ—Ä–µ config/urls.py
```python
from django.conf import settings
from django.conf.urls.static import static
from django.contrib import admin
from django.urls import include, path
from django.views.generic import RedirectView

urlpatterns = [
    path("admin/", admin.site.urls),
    path("", RedirectView.as_view(url="mainapp/")),
    path("mainapp/", include("mainapp.urls", namespace="mainapp")),
]

if settings.DEBUG:
    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)
```
* config/settings.py
```python
AUTH_USER_MODEL = "authapp.CustomUser"
```
* config/settings.py
```python
LOGIN_REDIRECT_URL = "mainapp:main_page"
LOGOUT_REDIRECT_URL = "mainapp:main_page"
```
* config/settings.py
```python
MESSAGE_STORAGE = "django.contrib.messages.storage.session.SessionStorage"
```
* config/settings.py
```

```
* 
```

```
* 
```

```
* 
```

```
* 
```

```
* 
```

```
* 
```

```
* 
```

```
* 
```

```
* 
```

```
* 
```

```
* 
```

```
* 
```

```
* 
```

```
* 
```

```
* 
```

```
* 
```

```
* 
```

```
* 
```

```
* 
```

```
* 
```

```
* 
```

```
* 
```

```
* 
```

```
* 
```

```
* 
```

```
* 
```

```
* 
```

```
* 
```

```
* 
```

```
* 
```

```
* 
```

```
* 
```

```
* 
```

```
* 
```

```
* 
```

```
* 
```

```
* 
```

```
* 
```

```
* 
```

```
* 
```

```
